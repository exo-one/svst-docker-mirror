FROM ubuntu:xenial
MAINTAINER Max Kaye <max@exo1.tech>

RUN apt-get update
RUN apt-get install -y \
      git haskell-stack \
      build-essential libtool autotools-dev \
      autoconf pkg-config libssl-dev \
      sudo \
      nano bsdmainutils \
      software-properties-common
# RUN add-apt-repository ppa:bitcoin/bitcoin
# RUN apt-get update \
#       && apt-get install -y libdb4.8-dev libdb4.8++-dev \
#       && apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

WORKDIR ~/

RUN mkdir -p src && cd src \
	&& git clone https://gitlab.com/exo-one/svst-haskell \
	&& cd svst-haskell

RUN stack upgrade

# Add stuff after this so we have a common image

RUN stack build